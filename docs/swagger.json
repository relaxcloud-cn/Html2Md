{
    "schemes": [
        "http",
        "https"
    ],
    "swagger": "2.0",
    "info": {
        "description": "HTML转Markdown转换服务的REST API",
        "title": "HTML2Markdown API",
        "termsOfService": "https://github.com/relaxcloud-cn/html2md",
        "contact": {
            "name": "API Support",
            "url": "https://github.com/relaxcloud-cn/html2md/issues",
            "email": "support@example.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://github.com/relaxcloud-cn/html2md/blob/main/LICENSE"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/",
    "paths": {
        "/api/v1/convert": {
            "post": {
                "description": "将HTML内容转换为Markdown格式，支持多种转换选项和插件",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "转换"
                ],
                "summary": "转换HTML为Markdown",
                "parameters": [
                    {
                        "description": "转换请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/model.ConvertRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "转换成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/model.ConvertResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "内部服务器错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/api/v1/convert/batch": {
            "post": {
                "description": "批量转换多个HTML内容为Markdown格式",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "转换"
                ],
                "summary": "批量转换HTML为Markdown",
                "parameters": [
                    {
                        "description": "批量转换请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/model.BatchConvertRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "转换成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/model.BatchConvertResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "内部服务器错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/api/v1/convert/simple": {
            "get": {
                "description": "通过URL参数进行简单的HTML转换，适用于快速测试",
                "consumes": [
                    "text/plain"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "转换"
                ],
                "summary": "简单HTML转换（GET方式）",
                "parameters": [
                    {
                        "type": "string",
                        "description": "HTML内容",
                        "name": "html",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"commonmark,table\"",
                        "description": "插件列表，逗号分隔",
                        "name": "plugins",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "example": "\"https://example.com\"",
                        "description": "基础域名",
                        "name": "domain",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "转换成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/model.ConvertResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "内部服务器错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/api/v1/convert/url": {
            "post": {
                "description": "从指定URL获取HTML内容并转换为Markdown格式",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "转换"
                ],
                "summary": "从URL转换HTML为Markdown",
                "parameters": [
                    {
                        "description": "URL转换请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/model.ConvertFromURLRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "转换成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/model.ConvertFromURLResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "内部服务器错误",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/api/v1/demo": {
            "get": {
                "description": "提供一个简单的演示页面，展示API的使用方法",
                "produces": [
                    "text/html"
                ],
                "tags": [
                    "演示"
                ],
                "summary": "演示接口",
                "responses": {
                    "200": {
                        "description": "HTML演示页面",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/api/v1/health": {
            "get": {
                "description": "检查服务健康状态和运行信息",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "系统"
                ],
                "summary": "健康检查",
                "responses": {
                    "200": {
                        "description": "服务正常",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/model.HealthResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "500": {
                        "description": "服务异常",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {}
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        },
        "/api/v1/info": {
            "get": {
                "description": "获取转换器版本、支持的插件和功能信息",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "系统"
                ],
                "summary": "获取转换器信息",
                "responses": {
                    "200": {
                        "description": "获取成功",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/model.APIResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "additionalProperties": true
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "model.APIResponse": {
            "type": "object",
            "properties": {
                "code": {
                    "description": "业务响应码",
                    "type": "integer",
                    "example": 200
                },
                "data": {
                    "description": "返回数据"
                },
                "msg": {
                    "description": "接口消息",
                    "type": "string",
                    "example": "success"
                }
            }
        },
        "model.BatchConvertItem": {
            "type": "object",
            "properties": {
                "error": {
                    "description": "错误信息（失败时）",
                    "type": "string",
                    "example": "转换失败"
                },
                "index": {
                    "description": "项目索引",
                    "type": "integer",
                    "example": 0
                },
                "result": {
                    "description": "转换结果（成功时）",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ConvertResponse"
                        }
                    ]
                },
                "success": {
                    "description": "是否成功",
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "model.BatchConvertRequest": {
            "type": "object",
            "required": [
                "items"
            ],
            "properties": {
                "items": {
                    "description": "批量转换项目，最多100个",
                    "type": "array",
                    "maxItems": 100,
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/model.ConvertRequest"
                    }
                }
            }
        },
        "model.BatchConvertResponse": {
            "type": "object",
            "properties": {
                "results": {
                    "description": "批量转换结果",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/model.BatchConvertItem"
                    }
                },
                "summary": {
                    "description": "批量转换摘要",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.BatchSummary"
                        }
                    ]
                }
            }
        },
        "model.BatchSummary": {
            "type": "object",
            "properties": {
                "average_time": {
                    "description": "平均处理时间",
                    "type": "string",
                    "example": "500ms"
                },
                "failed": {
                    "description": "失败数",
                    "type": "integer",
                    "example": 2
                },
                "success": {
                    "description": "成功数",
                    "type": "integer",
                    "example": 8
                },
                "total": {
                    "description": "总数",
                    "type": "integer",
                    "example": 10
                },
                "total_time": {
                    "description": "总处理时间",
                    "type": "string",
                    "example": "5s"
                }
            }
        },
        "model.ConversionMeta": {
            "type": "object",
            "properties": {
                "author": {
                    "description": "作者",
                    "type": "string",
                    "example": "Author Name"
                },
                "custom_meta": {
                    "description": "自定义元数据",
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    }
                },
                "description": {
                    "description": "页面描述",
                    "type": "string",
                    "example": "Page description"
                },
                "images": {
                    "description": "图片信息",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/model.ImageInfo"
                    }
                },
                "keywords": {
                    "description": "关键词",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "language": {
                    "description": "语言",
                    "type": "string",
                    "example": "zh-CN"
                },
                "links": {
                    "description": "链接信息",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/model.LinkInfo"
                    }
                },
                "title": {
                    "description": "页面标题",
                    "type": "string",
                    "example": "Page Title"
                }
            }
        },
        "model.ConversionStats": {
            "type": "object",
            "properties": {
                "converted_count": {
                    "description": "成功转换的元素数量",
                    "type": "integer",
                    "example": 23
                },
                "elements_count": {
                    "description": "HTML元素数量",
                    "type": "integer",
                    "example": 25
                },
                "input_size": {
                    "description": "输入HTML大小（字节）",
                    "type": "integer",
                    "example": 1024
                },
                "output_size": {
                    "description": "输出Markdown大小（字节）",
                    "type": "integer",
                    "example": 512
                },
                "plugins_used": {
                    "description": "使用的插件列表",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "commonmark",
                        "table"
                    ]
                },
                "processing_time": {
                    "description": "处理时间",
                    "type": "string",
                    "example": "100ms"
                },
                "skipped_count": {
                    "description": "跳过的元素数量",
                    "type": "integer",
                    "example": 2
                }
            }
        },
        "model.ConvertFromURLRequest": {
            "type": "object",
            "required": [
                "url"
            ],
            "properties": {
                "exclude_selector": {
                    "description": "排除匹配的元素",
                    "type": "string",
                    "example": ".ad"
                },
                "headers": {
                    "description": "自定义请求头",
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    }
                },
                "include_selector": {
                    "description": "选择器选项",
                    "type": "string",
                    "example": "article"
                },
                "options": {
                    "description": "转换选项",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ConvertOptions"
                        }
                    ]
                },
                "plugins": {
                    "description": "启用的插件",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "timeout": {
                    "description": "请求选项",
                    "type": "integer",
                    "example": 30
                },
                "url": {
                    "description": "网页URL",
                    "type": "string",
                    "example": "https://example.com/page.html"
                }
            }
        },
        "model.ConvertFromURLResponse": {
            "type": "object",
            "properties": {
                "content_type": {
                    "description": "内容类型",
                    "type": "string",
                    "example": "text/html"
                },
                "fetch_time": {
                    "description": "获取时间",
                    "type": "string",
                    "example": "2s"
                },
                "final_url": {
                    "description": "最终URL（重定向后）",
                    "type": "string"
                },
                "markdown": {
                    "description": "转换后的Markdown内容",
                    "type": "string",
                    "example": "# Hello World"
                },
                "metadata": {
                    "description": "转换元数据",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ConversionMeta"
                        }
                    ]
                },
                "response_headers": {
                    "description": "响应头",
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    }
                },
                "stats": {
                    "description": "转换统计信息",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ConversionStats"
                        }
                    ]
                },
                "status_code": {
                    "description": "HTTP状态码",
                    "type": "integer",
                    "example": 200
                },
                "url": {
                    "description": "源URL",
                    "type": "string",
                    "example": "https://example.com/page.html"
                },
                "warnings": {
                    "description": "转换警告信息",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "model.ConvertOptions": {
            "type": "object",
            "properties": {
                "bold_style": {
                    "description": "粗体样式: ** 或 __",
                    "type": "string",
                    "example": "**"
                },
                "bullet_list_marker": {
                    "description": "列表样式",
                    "type": "string",
                    "example": "-"
                },
                "code_block_style": {
                    "description": "代码块处理",
                    "type": "string",
                    "example": "fenced"
                },
                "emphasis_style": {
                    "description": "强调标记样式",
                    "type": "string",
                    "example": "*"
                },
                "heading_style": {
                    "description": "标题样式",
                    "type": "string",
                    "example": "atx"
                },
                "image_absolute_path": {
                    "description": "图片处理选项",
                    "type": "boolean",
                    "example": true
                },
                "keep_unknown_tags": {
                    "description": "是否保留HTML标签（对于不支持的标签）",
                    "type": "boolean",
                    "example": false
                },
                "link_target": {
                    "description": "链接处理选项",
                    "type": "string",
                    "example": "_blank"
                },
                "ordered_list_marker": {
                    "description": "有序列表标记: . 或 )",
                    "type": "string",
                    "example": "."
                },
                "table_compact": {
                    "description": "表格处理",
                    "type": "boolean",
                    "example": false
                },
                "trim_spaces": {
                    "description": "是否移除空白字符",
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "model.ConvertRequest": {
            "type": "object",
            "required": [
                "html"
            ],
            "properties": {
                "domain": {
                    "description": "基础域名，用于转换相对链接",
                    "type": "string",
                    "example": "https://example.com"
                },
                "html": {
                    "description": "HTML内容",
                    "type": "string",
                    "example": "\u003ch1\u003eHello World\u003c/h1\u003e"
                },
                "options": {
                    "description": "转换选项",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ConvertOptions"
                        }
                    ]
                },
                "plugins": {
                    "description": "启用的插件",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "commonmark",
                        "table"
                    ]
                }
            }
        },
        "model.ConvertResponse": {
            "type": "object",
            "properties": {
                "markdown": {
                    "description": "转换后的Markdown内容",
                    "type": "string",
                    "example": "# Hello World"
                },
                "metadata": {
                    "description": "转换元数据",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ConversionMeta"
                        }
                    ]
                },
                "stats": {
                    "description": "转换统计信息",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ConversionStats"
                        }
                    ]
                },
                "warnings": {
                    "description": "转换警告信息",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "model.HealthResponse": {
            "type": "object",
            "properties": {
                "memory": {
                    "description": "内存信息",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.MemInfo"
                        }
                    ]
                },
                "status": {
                    "description": "服务状态",
                    "type": "string",
                    "example": "ok"
                },
                "timestamp": {
                    "description": "检查时间",
                    "type": "string",
                    "example": "2023-12-01T12:00:00Z"
                },
                "uptime": {
                    "description": "运行时间",
                    "type": "string",
                    "example": "1h30m"
                },
                "version": {
                    "description": "服务版本",
                    "type": "string",
                    "example": "1.0.0"
                }
            }
        },
        "model.ImageInfo": {
            "type": "object",
            "properties": {
                "alt": {
                    "description": "替代文本",
                    "type": "string",
                    "example": "Image description"
                },
                "height": {
                    "description": "高度",
                    "type": "integer",
                    "example": 600
                },
                "src": {
                    "description": "图片源地址",
                    "type": "string",
                    "example": "https://example.com/image.jpg"
                },
                "title": {
                    "description": "图片标题",
                    "type": "string",
                    "example": "Image title"
                },
                "width": {
                    "description": "宽度",
                    "type": "integer",
                    "example": 800
                }
            }
        },
        "model.LinkInfo": {
            "type": "object",
            "properties": {
                "href": {
                    "description": "链接地址",
                    "type": "string",
                    "example": "https://example.com"
                },
                "target": {
                    "description": "链接目标",
                    "type": "string",
                    "example": "_blank"
                },
                "text": {
                    "description": "链接文本",
                    "type": "string",
                    "example": "Example Link"
                },
                "title": {
                    "description": "链接标题",
                    "type": "string",
                    "example": "Link title"
                }
            }
        },
        "model.MemInfo": {
            "type": "object",
            "properties": {
                "alloc": {
                    "description": "已分配内存（字节）",
                    "type": "integer",
                    "example": 1048576
                },
                "num_gc": {
                    "description": "GC次数",
                    "type": "integer",
                    "example": 5
                },
                "sys": {
                    "description": "系统内存（字节）",
                    "type": "integer",
                    "example": 4194304
                },
                "total_alloc": {
                    "description": "总分配内存（字节）",
                    "type": "integer",
                    "example": 2097152
                }
            }
        }
    }
}